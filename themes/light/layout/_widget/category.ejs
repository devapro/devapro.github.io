<%
var currentLang = page.lang || config.language[0] || 'en';
var langCategories = [];
site.categories.sort('name').each(function(item){
  var langPostCount = item.posts.filter(function(post) {
    return post.lang === currentLang;
  }).length;
  if (langPostCount > 0) {
    langCategories.push({ name: item.name, path: item.path, count: langPostCount });
  }
});
%>
<% if (langCategories.length){ %>
<div class="widget tag">
  <h3 class="title"><%= __('categories') %></h3>
  <ul class="entry">
  <% langCategories.forEach(function(item){ %>
    <li><a href="<%- url_for_lang(item.path) %>"><%= item.name %></a><small><%= item.count %></small></li>
  <% }); %>
  </ul>
</div>
<% } %>